<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta content="yes" name="apple-mobile-web-app-capable" />
  <meta content="yes" name="apple-touch-fullscreen" />
  <meta content="telephone=no,email=no" name="format-detection" />
  <meta name="mobile-web-app-capable" content="yes">
  <!-- 引入 Bootstrap -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <!-- 淘宝flexible -->
  <script src="http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"></script>
  <script src="http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/makegrid.js"></script>
  <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <title>标大大分享页面</title>
</head>

<body>
  <!-- 构建文件将会注入这里 -->
  <div id="app"></div>
 
  <script type="text/javascript">
    window.onload = function () {

      var type = $("#type").val();
      var id = $("#id").val();
      var source = $("#source").val();
      if (source == '' || source == 'null' || source == null) {
        source = "";
      }

      window.browser = {
        /*判断访问终端*/
        versions: function () {
          var u = navigator.userAgent,
            app = navigator.appVersion;
          return {
            trident: u.indexOf('Trident') > -1,
            /*IE内核*/
            presto: u.indexOf('Presto') > -1,
            /*opera内核*/
            webKit: u.indexOf('AppleWebKit') > -1,
            /*苹果、谷歌内核*/
            gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,
            /*火狐内核*/
            mobile: !!u.match(/AppleWebKit.*Mobile.*/),
            /*是否为移动终端*/
            ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
            /*ios终端*/
            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1,
            /*android终端或者uc浏览器*/
            iPhone: u.indexOf('iPhone') > -1,
            /*是否为iPhone或者QQHD浏览器*/
            iPad: u.indexOf('iPad') > -1,
            /*是否iPad*/
            webApp: u.indexOf('Safari') == -1,
            /*是否web应该程序，没有头部与底部*/
            weixin: u.toLowerCase().indexOf('micromessenger') > -1,
            /*是否是微信*/
            dingtalk: u.toLowerCase().indexOf('dingtalk') > -1,
            /*是否是顶顶*/
            qq: u.toLowerCase().match(/QQ/i) == "qq",
            /*qq*/
            safari: u.indexOf("Safari") > -1,
            /*safari*/
            qqBrowser: !!u.toLowerCase().match(/mqqbrowser|qzone|qqbrowser/i)
          };
        }(),
        language: (navigator.browserLanguage || navigator.language).toLowerCase()
      };
    }

    function GetQueryString(name) {
      var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
      var r = window.location.search.substr(1).match(reg); //获取url中"?"符后的字符串并正则匹配
      var context = "";
      if (r != null)
        context = r[2];
      reg = null;
      r = null;
      return context == null || context == "" || context == "undefined" ? "" : context;
    }
    /**
     * 打开APP
     */
    function openApp() {
      //移动端
      if (browser.versions.mobile || browser.versions.android || browser.versions.ios) {
        var localUrl = window.location.href;
        var type = GetQueryString("type");
        var id = GetQueryString("id");
       var source = GetQueryString("source");
       if(!id){
         localStorage.setItem("id",id);
       }else{
        id = localStorage.getItem("id");
       }
       if(!type){
         localStorage.setItem("type",type);
       }else{
        type = localStorage.getItem("type");
       }
       if(!source){
         localStorage.setItem("source",source);
       }else{
        source = localStorage.getItem("source");
       }
        var openAppUrl = "com.yaobang.biaodada://?type=" + type + "&id=" + id + "&source=" +source;
          if(!openAppUrl){
            openAppUrl = "com.yaobang.biaodada://";
          }
        window.location.href = openAppUrl;
      }else{
        alert("请用手机打开此页面");
      }
    }

  </script>

</body>

</html>
